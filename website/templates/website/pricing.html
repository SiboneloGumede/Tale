{%extends 'website/base.html'%}
{%load static%}

{%block title%} Pricing | Tale{%endblock%}

{%block content%}
<main id="content" role="main">
    <div class="overflow-hidden">
      <!-- Hero -->
      <div class="position-relative bg-img-start" style="background-image: url({%static 'assets/svg/components/card-11.svg' %});">
        <div class="container content-space-t-3 content-space-t-lg-3 content-space-b-2 content-space-b-lg-3">
          <!-- Heading -->
          <div class="w-md-75 w-lg-50 text-center mx-auto mb-9">
            <h1>Pick the right plan for you</h1>
          </div>
          <!-- End Heading -->

          <!-- Form Switch -->
          <div class="d-flex justify-content-center">
            <div class="form-check form-switch form-switch-between">
              <label class="form-check-label">Monthly</label>
              <input class="js-toggle-switch form-check-input" type="checkbox" checked
                     data-hs-toggle-switch-options='{
                       "targetSelector": "#pricingCount1, #pricingCount2, #pricingCount3"
                     }' id="id_checkbox" onchange="proText();">
              <label class="form-check-label form-switch-promotion">
                Annually
                <span class="form-switch-promotion-container">
                  <span class="form-switch-promotion-body">
                    <svg class="form-switch-promotion-arrow" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 99.3 57" width="48">
                      <path fill="none" stroke="#bdc5d1" stroke-width="4" stroke-linecap="round" stroke-miterlimit="10" d="M2,39.5l7.7,14.8c0.4,0.7,1.3,0.9,2,0.4L27.9,42"></path>
                      <path fill="none" stroke="#bdc5d1" stroke-width="4" stroke-linecap="round" stroke-miterlimit="10" d="M11,54.3c0,0,10.3-65.2,86.3-50"></path>
                    </svg>
                    <span class="form-switch-promotion-text">
                      <span class="badge bg-primary rounded-pill ms-1">Save up to 10%</span>
                    </span>
                  </span>
                </span>
              </label>
            </div>
          </div>
          <!-- End Form Switch -->
        </div>
      </div>
      <!-- End Hero -->

      <!-- Pricing -->
      <div class="container mt-n5 mt-lg-n10">
        <div class="position-relative zi-1 mb-10">
          <div class="row">
            <div class="col-md mb-3 mb-md-0">
              <!-- Card -->
              <div class="card h-100 zi-1">
                <div class="card-header text-center">
                  <div class="mb-2">
                    <span class="fs-5 align-top text-dark fw-semi-bold">ZAR</span>
                    <span id="pricingCount1" class="fs-1 text-dark fw-semi-bold"
                           data-hs-toggle-switch-item-options='{
                             "min": 0,
                             "max": 0
                           }'>0</span>
                    <span id="id_free">/yr</span>
                  </div>
                  
                  <h3 class="card-title">Free</h3>
                  <p class="card-text">All the basics for starting your storytelling journey</p>
                </div>

                <div class="card-body d-flex justify-content-center py-0">
                  <!-- List Checked -->
                  <ul class="list-checked list-checked-soft-bg-primary">
                    <li class="list-checked-item">No monthly fee</li>
                    <li class="list-checked-item">Real time insights</li>
                    <li class="list-checked-item">Internal SEO</li>
                    <li class="list-checked-item">Limited storage</li>
                  </ul>
                  <!-- End List Checked -->
                </div>

                <div class="card-footer text-center">
                  <div class="d-grid mb-2">
                    {%if request.user.is_authenticated%}
                      {%if request.user.is_free%}
                        <button type="button" class="btn btn-ghost-primary" disabled>Current Plan</button>
                      {%else%}
                        <button type="button" class="btn btn-ghost-primary" disabled>You're on the pro plan</button>
                      {%endif%}

                    {%else%}
                    <a href="{%url 'website:signup'%}" class="btn btn-ghost-primary">Sign Up</a>
                    {%endif%}
                  </div>
                </div>
              </div>
              <!-- End Card -->
            </div>
            <!-- End Col -->

            <div class="col-md mb-3 mb-md-0">
              <!-- Card -->
              <div class="card bg-primary h-100 zi-1">
                <div class="card-header text-center">
                  <div class="text-white mb-2">
                    <span class="fs-5 align-top fw-semi-bold">ZAR</span>
                    <span id="pricingCount2" class="fs-1 fw-semi-bold"
                           data-hs-toggle-switch-item-options='{
                             "min": 79,
                             "max": 853
                           }'>79</span>
                    <span id="id_pro">/yr</span>
                  </div>
                  
                  <h3 class="card-title text-white">Pro</h3>
                  <p class="card-text text-white-70">Everything you need for paygating your stories</p>
                </div>

                <div class="card-body d-flex justify-content-center py-0">
                  <!-- List Checked -->
                  <ul class="list-checked list-checked-soft-bg-light">
                    <li class="list-checked-item text-white">No ads</li>
                    <li class="list-checked-item text-white">Email newsletter</li>
                    <li class="list-checked-item text-white">Paid memberships</li>
                    <li class="list-checked-item text-white">Native payments</li>
                    <li class="list-checked-item text-white">Ebook sales</li>
                  </ul>
                  <!-- End List Checked -->
                </div>

                <div class="card-footer text-center">
                  <div class="d-grid mb-2">
                    {%if request.user.is_authenticated%}
                      {%if request.user.is_pro%}
                        <button type="button" class="btn btn-light" disabled>Current Plan</button>
                      {%else%}
                        <button type="button" class="btn btn-light" onclick="payfastModal();">Choose Plan</button>
                      {%endif%}

                    {%else%}
                    <a href="{%url 'website:signup'%}" class="btn btn-light">Sign Up</a>
                    {%endif%}
                  </div>
                </div>
              </div>
              <!-- End Card -->
            </div>
            <!-- End Col -->
            
          </div>
          <!-- End Row -->

          <!-- SVG Elements -->
          <figure class="position-absolute bottom-0 start-0 mb-n7 ms-n7" style="width: 9rem;">
            <svg viewBox="0 0 522 504" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path opacity="0.5" d="M332 504H510.4C516.8 504 522 498.8 522 492.4V314C522 209.1 436.9 124 332 124C227.1 124 142 209.1 142 314C142 418.9 227.1 504 332 504Z" fill="#00C9A7"/>
              <path d="M190 380H11.6C5.2 380 0 374.8 0 368.4V190C0 85.1 85.1 0 190 0C294.9 0 380 85.1 380 190C380 294.9 294.9 380 190 380Z" fill="@@vars.style.color"/>
            </svg>
          </figure>

          <figure class="position-absolute top-0 end-0 mt-n8 me-n8" style="width: 10rem;">
            <img class="img-fluid" src="{%static 'assets/svg/components/dots-lg.svg' %}" alt="Image Description">
          </figure>
          <!-- End SVG Elements -->
        </div>

      </div>
      <!-- End Pricing -->
    </div>

    <!-- FAQ -->
    <div class="container content-space-t-2 content-space-b-1">

      <div class="row justify-content-md-center">
        <div class="col-sm-12 col-lg-12 mb-3 mb-md-5">
          <p>The payment structure covers the costs associated with setting up a PRO Tale account. This account allows you to collect subscription fees and payments for e-book sales.</p>
        </div>
        <!-- End Col -->

      </div>
      <!-- End Row -->
    </div>
    <!-- End FAQ -->

    <!-- FAQ -->
    <div class="container content-space-b-2">
      <!-- Heading -->
      <div class="w-md-75 w-lg-50 text-center mx-lg-auto mb-5 mb-md-9">
        <h2>Frequently Asked Questions</h2>
      </div>
      <!-- End Heading -->

      <div class="row justify-content-md-center">
        <div class="col-sm-6 col-lg-5 mb-3 mb-md-5">
          <h4>How do i need get my payments as an author?</h4>
          <p>You will need a payfast account to receive your ebook sales and subscription revenue. Payfast will still charge at their standard rates once they complete a transaction. This  applies for all plans. </p>
        </div>
        <!-- End Col -->

        <div class="col-sm-6 col-lg-5 mb-3 mb-md-5">
          <h4>How can my customers pay?</h4>
          <p>Customers can pay with their Payfast account or their Visa, master card. </p>
        </div>
        <!-- End Col -->

        <div class="col-sm-6 col-lg-5 mb-3 mb-md-5">
          <h4>Can i cancel my account anytime?</h4>
          <p>Absolutely you can cancel your account whenever you’d like if you decide we’re not for you.</p>
        </div>
        <!-- End Col -->

        <div class="col-sm-6 col-lg-5 mb-3 mb-md-5">
          <h4>When do i get paid?</h4>
          <p>We will deposit your sales to you immediately after a transaction has been completed.</p>
        </div>
        <!-- End Col -->

        <div class="col-sm-6 col-lg-5 mb-3 mb-md-5">
          <h4>Do you offer charity discounts?</h4>
          <p>We love to support great causes of all kinds so please get in touch with us and we’ll see where we can help.</p>
        </div>
        <!-- End Col -->

        <div class="col-sm-6 col-lg-5 mb-3 mb-md-5">
          <h4>How can I contact Tale?</h4>
          <p>Just shoot us an email at <a href="mailto:info@taleapp.io">info@taleapp.io</a> or reach out to us using <a href="{%url 'website:contact'%}">our contact form</a>.</p>
        </div>
        <!-- End Col -->
      </div>
      <!-- End Row -->
    </div>
    <!-- End FAQ -->
</main>

<script type="text/javascript">
  var element = document.getElementById("id_pricing");
  element.classList.add("active");
</script>

{%endblock%}

{%block plugins%}
<script src="{%static 'assets/vendor/hs-toggle-switch/dist/hs-toggle-switch.min.js' %}"></script>
{%endblock%}

{%block js%}
// INITIALIZATION OF TOGGLE SWITCH
// =======================================================
new HSToggleSwitch('.js-toggle-switch')
{%endblock%}

{%if request.user.is_authenticated%}
{%block payfast%}
<script src="https://www.payfast.co.za/onsite/engine.js"></script> 

<script type="text/javascript">

  function payfastModal(){
    var checkbox = document.getElementById('id_checkbox');
    if (checkbox.checked == true){
      window.payfast_do_onsite_payment({"uuid":"{{yearly_identifier}}"}); 
    }
    else{
       window.payfast_do_onsite_payment({"uuid":"{{monthly_identifier}}"});
    }
    
  }

  function proText(){
    var checkbox = document.getElementById('id_checkbox');
    if (checkbox.checked == true){
      document.getElementById('id_pro').innerHTML = '/yr';
      document.getElementById('id_freee').innerHTML = '/yr';

    }
    else{
       document.getElementById('id_pro').innerHTML = '/mo';
      document.getElementById('id_freee').innerHTML = '/mo';
    }
    
  }
  
</script>
{%endblock%}
{%endif%}